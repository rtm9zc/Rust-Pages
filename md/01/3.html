<!DOCTYPE HTML>
<html lang="en-US" manifest="../../manifest.appcache">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Pattern Matching | Rust in Seven Programs</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="rtm9zc">
        <meta name="description" content="A Tutorial to the Rust programming language">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="../../md/01/4.html" />
        
        
        <link rel="prev" href="../../md/01/2.html" />
        

        <meta property="og:title" content="Pattern Matching | Rust in Seven Programs">
        <meta property="og:site_name" content="Rust in Seven Programs">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/rtm9zc">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        

        <link rel="stylesheet" href="../../gitbook/style.css">
        


        
    <div class="book" data-github="rtm9zc/Rust-Pages" data-level="1.3" data-basepath="../.." data-revision="1401726962514">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://github.com/rtm9zc/Rust-Pages" target="_blank" class="btn pull-left home-bookmark" aria-label="GitHub home"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="btn-group btn-block">
        <button id="reduce-font-size" class="btn btn-default">A</button>
        <button id="enlarge-font-size" class="btn btn-default">A</button>
    </div>

    <ul class="list-group font-family-list">
        <li class="list-group-item" data-font="0">Serif</li>
        <li class="list-group-item" data-font="1">Sans</li>
    </ul>

    <div class="btn-group btn-group-xs btn-block color-theme-list">
        <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
    </div>
</div>

    </span>

    <!-- Actions Right -->
    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    

    
    <a href="https://github.com/rtm9zc/Rust-Pages/stargazers" target="_blank" class="btn pull-right count-star hidden-xs"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/rtm9zc/Rust-Pages/watchers" target="_blank" class="btn pull-right count-watch hidden-xs"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="../../" >Rust in Seven Programs</a>
    </h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        <li>
            <a href="https://github.com/rtm9zc" target="blank" class="author-link">About the author</a>
        </li>
        

        
        <li>
            <a href="https://github.com/rtm9zc/Rust-Pages/issues" target="blank"class="issues-link">Questions and Issues</a>
        </li>
        

        
        <li>
            <a href="https://github.com/rtm9zc/Rust-Pages/edit/master/md/01/3.md" target="blank" class="contribute-link">Edit and Contribute</a>
        </li>
        

        

        <li data-level="0" data-path="index.html">
            <a href="../../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li class="chapter " data-level="1" data-path="md/01.html">
                
                <a href="../../md/01.html">
                    <i class="fa fa-check"></i> <b>1.</b> Getting Started: Variables, Functions, and Syntax
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="1.1" data-path="md/01/1.html">
                            
                            <a href="../../md/01/1.html">
                                <i class="fa fa-check"></i> <b>1.1.</b> Variables
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.2" data-path="md/01/2.html">
                            
                            <a href="../../md/01/2.html">
                                <i class="fa fa-check"></i> <b>1.2.</b> Conditionals
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.3" data-path="md/01/3.html">
                            
                            <a href="../../md/01/3.html">
                                <i class="fa fa-check"></i> <b>1.3.</b> Pattern Matching
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.4" data-path="md/01/4.html">
                            
                            <a href="../../md/01/4.html">
                                <i class="fa fa-check"></i> <b>1.4.</b> Looping
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.5" data-path="md/01/5.html">
                            
                            <a href="../../md/01/5.html">
                                <i class="fa fa-check"></i> <b>1.5.</b> Expressions
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.6" data-path="md/01/6.html">
                            
                            <a href="../../md/01/6.html">
                                <i class="fa fa-check"></i> <b>1.6.</b> Functions
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.7" data-path="md/01/7.html">
                            
                            <a href="../../md/01/7.html">
                                <i class="fa fa-check"></i> <b>1.7.</b> Program 1: Collatz
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li class="chapter " data-level="2" data-path="md/02.html">
                
                <a href="../../md/02.html">
                    <i class="fa fa-check"></i> <b>2.</b> Starting to Corrode: Pointers, Memory, Strings, and I/O
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="2.1" data-path="md/02/1.html">
                            
                            <a href="../../md/02/1.html">
                                <i class="fa fa-check"></i> <b>2.1.</b> Memory Management and Pointers
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.2" data-path="md/02/2.html">
                            
                            <a href="../../md/02/2.html">
                                <i class="fa fa-check"></i> <b>2.2.</b> Vectors and Strings
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.3" data-path="md/02/3.html">
                            
                            <a href="../../md/02/3.html">
                                <i class="fa fa-check"></i> <b>2.3.</b> Error Handling
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.4" data-path="md/02/4.html">
                            
                            <a href="../../md/02/4.html">
                                <i class="fa fa-check"></i> <b>2.4.</b> Basic I/O
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.5" data-path="md/02/5.html">
                            
                            <a href="../../md/02/5.html">
                                <i class="fa fa-check"></i> <b>2.5.</b> Example: Secret Sharing
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li class="chapter " data-level="3" data-path="md/03.html">
                
                <a href="../../md/03.html">
                    <i class="fa fa-check"></i> <b>3.</b> Multi-Purpose Maps: Structures, Traits, and Higher-Order Functions
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="3.1" data-path="md/03/1.html">
                            
                            <a href="../../md/03/1.html">
                                <i class="fa fa-check"></i> <b>3.1.</b> Structures
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.2" data-path="md/03/2.html">
                            
                            <a href="../../md/03/2.html">
                                <i class="fa fa-check"></i> <b>3.2.</b> Traits
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.3" data-path="md/03/3.html">
                            
                            <a href="../../md/03/3.html">
                                <i class="fa fa-check"></i> <b>3.3.</b> Higher-Order Functions
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.4" data-path="md/03/4.html">
                            
                            <a href="../../md/03/4.html">
                                <i class="fa fa-check"></i> <b>3.4.</b> Example: Mapping a List
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li class="chapter " data-level="4" data-path="md/04.html">
                
                <a href="../../md/04.html">
                    <i class="fa fa-check"></i> <b>4.</b> Tasks and Communication
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="4.1" data-path="md/04/1.html">
                            
                            <a href="../../md/04/1.html">
                                <i class="fa fa-check"></i> <b>4.1.</b> Task Properties
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.2" data-path="md/04/2.html">
                            
                            <a href="../../md/04/2.html">
                                <i class="fa fa-check"></i> <b>4.2.</b> Example: Multi-Tasking Map
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li class="chapter " data-level="5" data-path="md/05.html">
                
                <a href="../../md/05.html">
                    <i class="fa fa-check"></i> <b>5.</b> Arcs and Sharing Memory
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="5.1" data-path="md/05/1.html">
                            
                            <a href="../../md/05/1.html">
                                <i class="fa fa-check"></i> <b>5.1.</b> The Arc Module
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        

        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 16.666666666666668%;min-width: 12.5%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../../md/01.html" title="Getting Started: Variables, Functions, and Syntax" class="chapter done new-chapter" data-progress="1" style="left: 4.166666666666667%;"></a>
    
        <a href="../../md/01/1.html" title="Variables" class="chapter done " data-progress="1.1" style="left: 8.333333333333334%;"></a>
    
        <a href="../../md/01/2.html" title="Conditionals" class="chapter done " data-progress="1.2" style="left: 12.5%;"></a>
    
        <a href="../../md/01/3.html" title="Pattern Matching" class="chapter done " data-progress="1.3" style="left: 16.666666666666668%;"></a>
    
        <a href="../../md/01/4.html" title="Looping" class="chapter  " data-progress="1.4" style="left: 20.833333333333332%;"></a>
    
        <a href="../../md/01/5.html" title="Expressions" class="chapter  " data-progress="1.5" style="left: 25%;"></a>
    
        <a href="../../md/01/6.html" title="Functions" class="chapter  " data-progress="1.6" style="left: 29.166666666666668%;"></a>
    
        <a href="../../md/01/7.html" title="Program 1: Collatz" class="chapter  " data-progress="1.7" style="left: 33.333333333333336%;"></a>
    
        <a href="../../md/02.html" title="Starting to Corrode: Pointers, Memory, Strings, and I/O" class="chapter  new-chapter" data-progress="2" style="left: 37.5%;"></a>
    
        <a href="../../md/02/1.html" title="Memory Management and Pointers" class="chapter  " data-progress="2.1" style="left: 41.666666666666664%;"></a>
    
        <a href="../../md/02/2.html" title="Vectors and Strings" class="chapter  " data-progress="2.2" style="left: 45.833333333333336%;"></a>
    
        <a href="../../md/02/3.html" title="Error Handling" class="chapter  " data-progress="2.3" style="left: 50%;"></a>
    
        <a href="../../md/02/4.html" title="Basic I/O" class="chapter  " data-progress="2.4" style="left: 54.166666666666664%;"></a>
    
        <a href="../../md/02/5.html" title="Example: Secret Sharing" class="chapter  " data-progress="2.5" style="left: 58.333333333333336%;"></a>
    
        <a href="../../md/03.html" title="Multi-Purpose Maps: Structures, Traits, and Higher-Order Functions" class="chapter  new-chapter" data-progress="3" style="left: 62.5%;"></a>
    
        <a href="../../md/03/1.html" title="Structures" class="chapter  " data-progress="3.1" style="left: 66.66666666666667%;"></a>
    
        <a href="../../md/03/2.html" title="Traits" class="chapter  " data-progress="3.2" style="left: 70.83333333333333%;"></a>
    
        <a href="../../md/03/3.html" title="Higher-Order Functions" class="chapter  " data-progress="3.3" style="left: 75%;"></a>
    
        <a href="../../md/03/4.html" title="Example: Mapping a List" class="chapter  " data-progress="3.4" style="left: 79.16666666666667%;"></a>
    
        <a href="../../md/04.html" title="Tasks and Communication" class="chapter  new-chapter" data-progress="4" style="left: 83.33333333333333%;"></a>
    
        <a href="../../md/04/1.html" title="Task Properties" class="chapter  " data-progress="4.1" style="left: 87.5%;"></a>
    
        <a href="../../md/04/2.html" title="Example: Multi-Tasking Map" class="chapter  " data-progress="4.2" style="left: 91.66666666666667%;"></a>
    
        <a href="../../md/05.html" title="Arcs and Sharing Memory" class="chapter  new-chapter" data-progress="5" style="left: 95.83333333333333%;"></a>
    
        <a href="../../md/05/1.html" title="The Arc Module" class="chapter  " data-progress="5.1" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_4">
                    
                        <h2 id="pattern-matching">Pattern Matching</h2>
<p>Rather than using a “switch” statement, as you may have seen in other languages, Rust uses the <code>match</code> statement. <code>match</code> is like a significantly more powerful and useful switch, and is used fairly extensively in a lot of Rust code. You&#39;ll run into it frequently, particularly in the error handling section. Here&#39;s an example:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">match</span> isOdd(foo) {
    <span class="hljs-keyword">true</span> =&gt; println!(<span class="hljs-string">"Odd"</span>), <span class="hljs-comment">// Notice the comma</span>
    <span class="hljs-keyword">false</span> =&gt; println!(<span class="hljs-string">"Even"</span>)
    }
</code></pre>
<p>A <code>match</code> statement evaluates the first branch with a matching pattern. The pattern is an expression with the same type as the object being matched. If the object has the same value as one that the pattern accepts (see below for accepting multiple values with a single match arm), then the corresponding arm will be evaluated.</p>
<p>If we want to include more than one statement in a branch of the <code>match</code>, we have to surround the code in braces. With braces, we don&#39;t need a comma, but they&#39;re allowed.</p>
<pre><code class="lang-rust"><span class="hljs-keyword">match</span> isOdd(foo) {
    <span class="hljs-keyword">true</span> =&gt; { println!(<span class="hljs-string">"Odd"</span>); <span class="hljs-number">0</span> }
    <span class="hljs-keyword">false</span> =&gt; { println!(<span class="hljs-string">"Even"</span>); <span class="hljs-number">1</span> }
    }
</code></pre>
<p>The compiler checks that at least one pattern of the <code>match</code> expression will always match. When a variable is matched, the patterns must completely represent the possible values the variable could hold. This is easy for booleans; there&#39;s just <code>true</code> and <code>false</code>. For other types, listing every possible value would be tedious and awful. </p>
<p>To prevent insanity, Rust includes a <code>_</code> that matches everything.</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> x = <span class="hljs-number">4</span>;
<span class="hljs-keyword">match</span> x {
    <span class="hljs-number">0</span> =&gt; { ; } <span class="hljs-comment">// Do nothing</span>
    <span class="hljs-number">4</span> =&gt; { foo(); } 
    <span class="hljs-number">_</span> =&gt; { bar(); } <span class="hljs-comment">// Matches every integer value</span>
}
</code></pre>
<p><code>match</code> can also use simple logical expressions in its arms. For example, </p>
<pre><code class="lang-rust"><span class="hljs-keyword">match</span> x {
    <span class="hljs-number">3</span>|<span class="hljs-number">5</span>|<span class="hljs-number">6</span>  =&gt; { println!(<span class="hljs-string">"First arm!"</span>); }
    <span class="hljs-number">10</span>..<span class="hljs-number">16</span> =&gt; { println!(<span class="hljs-string">"Second arm!"</span>); }   
    <span class="hljs-number">_</span>      =&gt; { println!(<span class="hljs-string">"Default arm!"</span>); }
    }
</code></pre>
<p>will print &quot;First arm!&quot; if x is 3, 5, or 6, &quot;Second arm!&quot; if x is between 10 and 16, and &quot;Default arm!&quot; otherwise.</p>
<p>Pattern matching is used to access tuple values. If we don&#39;t care about a value,
we can use <code>_</code> to ignore it.</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> tup = (<span class="hljs-number">4</span>, <span class="hljs-number">5.0</span>, <span class="hljs-keyword">false</span>, <span class="hljs-string">"hello"</span>); 
<span class="hljs-keyword">let</span> (a, b, c, <span class="hljs-number">_</span>) = tup;
</code></pre>
<p>The <code>_</code> is handy for <code>match</code> statements too.</p>
<pre><code class="lang-rust"><span class="hljs-keyword">match</span> status {
    (<span class="hljs-number">0</span>, <span class="hljs-keyword">true</span>) =&gt; println!(<span class="hljs-string">"Success"</span>),
    (<span class="hljs-number">_</span>, <span class="hljs-keyword">true</span>) =&gt; println!(<span class="hljs-string">"Pyrrhic victory"</span>), <span class="hljs-comment">// Any first value matches</span>
    (<span class="hljs-number">_</span>, <span class="hljs-number">_</span>) =&gt; println!(<span class="hljs-string">"Complete loss"</span>) <span class="hljs-comment">// Any pair of values will match</span>
}
</code></pre>
<p>(note that in this case <code>status</code> would need to be of type <code>(int, bool)</code>)</p>
<p><code>match</code> also allows for &quot;pattern guards&quot; - logical expressions that can be used to further
narrow down what a particular arm selects. For example:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">match</span> tup {
    (x,y) <span class="hljs-keyword">if</span> x &gt; y =&gt; { println!(<span class="hljs-string">"Decreasing"</span>); }
    (x,y) <span class="hljs-keyword">if</span> y &gt; x =&gt; { println!(<span class="hljs-string">"Increasing"</span>); }
    <span class="hljs-number">_</span>              =&gt; { println!(<span class="hljs-string">"Equal"</span>)}
}
</code></pre>
<p>will print correctly the relation between <code>x</code> and <code>y</code>.</p>
<h3 id="an-exercise-in-matching">An Exercise in Matching</h3>
<p>To quickly test your comprehension of what you&#39;ve learned so far, try writing a simple program to do the following:
Given a tuple containing an int and a bool, use a match statement to determine (a) if the bool is true and the int is 
between 20 and 26, (b) if the bool is true and the aforementioned condition isn&#39;t true for the int, (c) if the int is between 40 and 49 (where the value of the bool doesn&#39;t matter), and (d), wherein none of the previous conditions are true. Print out an appropriate message using <code>println</code> for each case (e.g. for (a), you could print
&quot;True and in range&quot;, or something of the sort). Since you haven&#39;t learned how to get input yet, just define a variable like this:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> x = (<span class="hljs-number">51</span>, <span class="hljs-keyword">true</span>);
</code></pre>
<p>match on it, and manually change its value to test the different branches.
Put your code inside a block of this form, and run &quot;rustc <filename>&quot; to compile it.</p>
<pre><code class="lang-rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span>(</span>) {
    <span class="hljs-comment">// Code goes here</span>
}
</code></pre>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../../md/01/2.html" class="navigation navigation-prev " aria-label="Previous page: Conditionals"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../md/01/4.html" class="navigation navigation-next " aria-label="Next page: Looping"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="../../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="../../gitbook/app.js"></script>
        

    
    <script src="../../gitbook/plugins/gitbook-plugin-mixpanel/plugin.js"></script>
    

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {};
    gitbook.start(config);
});
</script>

    </body>
</html>
